import React, { Component } from "react";
import { Icon, PrimaryButton, Link } from "office-ui-fabric-react";
import { registerIcons } from "office-ui-fabric-react";
import "./ActionBar.scss";

registerIcons({
  icons: {
    "gitgub-svg": (
      <svg
        width="13"
        height="12"
        viewBox="0 0 13 12"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M6.5 0.146484C7.05078 0.146484 7.58203 0.21875 8.09375 0.363281C8.60547 0.503906 9.08203 0.705078 9.52344 0.966797C9.96875 1.22852 10.373 1.54297 10.7363 1.91016C11.1035 2.27344 11.418 2.67773 11.6797 3.12305C11.9414 3.56445 12.1426 4.04102 12.2832 4.55273C12.4277 5.06445 12.5 5.5957 12.5 6.14648C12.5 6.79102 12.4004 7.41211 12.2012 8.00977C12.0059 8.60742 11.7285 9.15625 11.3691 9.65625C11.0098 10.1562 10.5781 10.5957 10.0742 10.9746C9.57031 11.3496 9.01172 11.6387 8.39844 11.8418C8.38672 11.8457 8.36914 11.8496 8.3457 11.8535C8.32227 11.8535 8.30469 11.8535 8.29297 11.8535C8.19922 11.8535 8.125 11.8262 8.07031 11.7715C8.01562 11.7168 7.98828 11.6445 7.98828 11.5547C7.98828 11.2773 7.98828 11.0039 7.98828 10.7344C7.99219 10.4609 7.99414 10.1855 7.99414 9.9082C7.99414 9.70898 7.96484 9.50781 7.90625 9.30469C7.84766 9.10156 7.74219 8.93164 7.58984 8.79492C8.04297 8.74414 8.43945 8.65234 8.7793 8.51953C9.12305 8.38281 9.4082 8.19531 9.63477 7.95703C9.86523 7.71875 10.0371 7.42578 10.1504 7.07812C10.2676 6.72656 10.3262 6.3125 10.3262 5.83594C10.3262 5.53125 10.2754 5.24414 10.1738 4.97461C10.0723 4.70117 9.91797 4.45117 9.71094 4.22461C9.75391 4.11523 9.78516 4.00195 9.80469 3.88477C9.82422 3.76758 9.83398 3.65039 9.83398 3.5332C9.83398 3.38086 9.81641 3.23047 9.78125 3.08203C9.75 2.92969 9.70703 2.78125 9.65234 2.63672C9.63281 2.62891 9.61133 2.625 9.58789 2.625C9.56445 2.625 9.54297 2.625 9.52344 2.625C9.39844 2.625 9.26758 2.64648 9.13086 2.68945C8.99414 2.72852 8.85742 2.7793 8.7207 2.8418C8.58789 2.90039 8.45898 2.9668 8.33398 3.04102C8.20898 3.11523 8.09766 3.18555 8 3.25195C7.51172 3.11523 7.01172 3.04688 6.5 3.04688C5.98828 3.04688 5.48828 3.11523 5 3.25195C4.90234 3.18555 4.79102 3.11523 4.66602 3.04102C4.54102 2.9668 4.41016 2.90039 4.27344 2.8418C4.14062 2.7793 4.00391 2.72852 3.86328 2.68945C3.72656 2.64648 3.59766 2.625 3.47656 2.625C3.45703 2.625 3.43555 2.625 3.41211 2.625C3.38867 2.625 3.36719 2.62891 3.34766 2.63672C3.29297 2.78125 3.24805 2.92969 3.21289 3.08203C3.18164 3.23047 3.16602 3.38086 3.16602 3.5332C3.16602 3.65039 3.17578 3.76758 3.19531 3.88477C3.21484 4.00195 3.24609 4.11523 3.28906 4.22461C3.08203 4.45117 2.92773 4.70117 2.82617 4.97461C2.72461 5.24414 2.67383 5.53125 2.67383 5.83594C2.67383 6.3125 2.73047 6.72461 2.84375 7.07227C2.96094 7.41992 3.13281 7.71484 3.35938 7.95703C3.58984 8.19531 3.875 8.38281 4.21484 8.51953C4.55469 8.65625 4.95117 8.75 5.4043 8.80078C5.29102 8.90234 5.20312 9.02539 5.14062 9.16992C5.08203 9.31055 5.04297 9.45508 5.02344 9.60352C4.91797 9.6543 4.80664 9.69336 4.68945 9.7207C4.57227 9.74805 4.45508 9.76172 4.33789 9.76172C4.08789 9.76172 3.88086 9.70312 3.7168 9.58594C3.55273 9.46875 3.40625 9.30859 3.27734 9.10547C3.23047 9.03125 3.17383 8.95703 3.10742 8.88281C3.04102 8.80859 2.96875 8.74219 2.89062 8.68359C2.8125 8.625 2.72852 8.57812 2.63867 8.54297C2.54883 8.50391 2.45508 8.48438 2.35742 8.48438C2.3418 8.48438 2.31836 8.48633 2.28711 8.49023C2.25586 8.49023 2.22461 8.49414 2.19336 8.50195C2.16602 8.50977 2.14062 8.52148 2.11719 8.53711C2.09375 8.55273 2.08203 8.57227 2.08203 8.5957C2.08203 8.64258 2.10938 8.68945 2.16406 8.73633C2.21875 8.7793 2.26367 8.8125 2.29883 8.83594L2.31641 8.84766C2.40234 8.91406 2.47656 8.97852 2.53906 9.04102C2.60547 9.09961 2.66406 9.16406 2.71484 9.23438C2.76562 9.30078 2.81055 9.375 2.84961 9.45703C2.89258 9.53516 2.9375 9.625 2.98438 9.72656C3.11719 10.0312 3.30273 10.2539 3.54102 10.3945C3.7832 10.5312 4.07031 10.5996 4.40234 10.5996C4.50391 10.5996 4.60547 10.5938 4.70703 10.582C4.80859 10.5664 4.91016 10.5488 5.01172 10.5293V11.5488C5.01172 11.6426 4.98242 11.7168 4.92383 11.7715C4.86914 11.8262 4.79492 11.8535 4.70117 11.8535C4.68945 11.8535 4.67188 11.8535 4.64844 11.8535C4.62891 11.8496 4.61328 11.8457 4.60156 11.8418C3.98828 11.6426 3.42969 11.3555 2.92578 10.9805C2.42188 10.6016 1.99023 10.1621 1.63086 9.66211C1.27148 9.1582 0.992188 8.60742 0.792969 8.00977C0.597656 7.41211 0.5 6.79102 0.5 6.14648C0.5 5.5957 0.570312 5.06445 0.710938 4.55273C0.855469 4.04102 1.05859 3.56445 1.32031 3.12305C1.58203 2.67773 1.89453 2.27344 2.25781 1.91016C2.625 1.54297 3.0293 1.22852 3.4707 0.966797C3.91602 0.705078 4.39453 0.503906 4.90625 0.363281C5.41797 0.21875 5.94922 0.146484 6.5 0.146484Z"
          fill="#0078D7"
        />
      </svg>
    )
  }
});
class ActionBar extends Component {
  constructor(props) {
    super(props);

    this.onVSCodeClick = this.onVSCodeClick.bind(this);
    this.onDeployClick = this.onDeployClick.bind(this);
  }

  onDeployClick() {
    let { template } = this.props;
    var url =
      "https://portal.azure.com/#create/Microsoft.Template/uri/" +
      encodeURIComponent(template);
    console.log("handleDeployClick" + template);
    window.open(url);
  }

  onVSCodeClick() {
    let { repository } = this.props;
    var url = "vscode://vscode.git/clone?url=" + encodeURIComponent(repository);
    window.open(url);
  }

  render() {
    let { repository } = this.props;

    return (
      <div className="action-container">
        <div className="action-item">
          <PrimaryButton text="Deploy" onClick={this.onDeployClick} />
        </div>

        <div className="action-item">
          <PrimaryButton text="Open in vscode" onClick={this.onVSCodeClick} />
        </div>
        <div className="action-item">
          <Link href={repository}>
            <Icon iconName="gitgub-svg" />
            <span className="github-open">Open in Github</span>
          </Link>
        </div>
      </div>
    );
  }
}

export default ActionBar;
